<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    {% if page.seo_title %}
      {{ page.seo_title }}
    {% else %}
      {{ page.title }} | {{ site.title }}
    {% endif %}
  </title>

  {% seo title=false %}
  
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
  <!-- <title>{{ page.title }} | {{ site.title }}</title> -->
  <link rel="icon" type="image/png" sizes="16x16" href="{{ site.url }}{{ site.baseurl }}/assets/images/icons/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ site.url }}{{ site.baseurl }}/assets/images/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="{{ site.url }}{{ site.baseurl }}/assets/images/icons/favicon-48x48.png">
  <link rel="icon" type="image/png" sizes="96x96" href="{{ site.url }}{{ site.baseurl }}/assets/images/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="144x144" href="{{ site.url }}{{ site.baseurl }}/assets/images/icons/favicon-144x144.png">
  <link rel="icon" type="image/png" sizes="192x192" href="{{ site.url }}{{ site.baseurl }}/assets/images/icons/favicon-192x192.png">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ site.url }}{{ site.baseurl }}/assets/images/icons/apple-touch-icon.png">
  <link rel="shortcut icon" href="{{ site.url }}{{ site.baseurl }}/assets/images/favicon.ico">
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>
  {% feed_meta %}
  <script type="application/ld+json">
  {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "The Quiet Readers",
      "alternateName": ["TheQuietReaders", "TQR"],
      "url": "{{ site.url }}{{ site.baseurl }}/"
  }
  </script>
</head>

<body>

  <header id="site-header">
    <div class="header-content">
      <a href="/" class="site-title">{{ site.title }}</a>
      <nav>
        <a href="{{ site.baseurl }}/" class="nav-home">Home</a>
        <a href="{{ site.baseurl }}/books">Books</a>
        <a href="{{ site.baseurl }}/tv">Movies & TV</a>
        <a href="{{ site.baseurl }}/games">Games</a>
        <a href="{{ site.baseurl }}/about">About</a>
      </nav>
      
      <!-- <div class="search-container">
        <div class="search-wrapper">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#8e44ad" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          <input type="text" id="search-input" placeholder="Search title, genre, or..." class="search-bar">
        </div>
        <ul id="results-container"></ul>
      </div> -->

      <div class="search-container">
        <form action="/search/" method="get" class="search-wrapper">
          <input type="text" name="q" id="search-input" placeholder="Search title, genre, or..." class="search-bar">
          <button type="submit" class="search-icon-btn" aria-label="Search">
            <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#8e44ad" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
          </button>
        </form>
        <ul id="results-container"></ul>
      </div>
      
    </div>
  </header>

  <main class="page-content" aria-label="Content">
    <div class="wrapper">
      {{ content }}
    </div>
  </main>

<footer>
    <div class="footer-content">
      
      <div class="footer-section">
        <h3>The Quiet Readers</h3>
        <p>The Quiet Readers is a dreamy space for book reviews, romance, fantasy, and media. Exploring new worlds, one page at a time.</p>
      </div>

      <div class="footer-section" style= "text-align: center">
        <h3>Explore</h3>
        <ul class="footer-links">
          <li><a href="{{ site.baseurl }}/books/">Book Reviews</a></li>
          <li><a href="{{ site.baseurl }}/tv/">Movies & TV</a></li>
          <li><a href="{{ site.baseurl }}/about/">About Us</a></li>
        </ul>
      </div>

      <div class="footer-section">
        <h3>Contact Us</h3>
        <p>thequietreaders@outlook.com</p>

        <div class="rss-container">
            <a href="{{ site.baseurl }}/feed.xml" target="_blank" class="rss-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 11a9 9 0 0 1 9 9"></path>
                    <path d="M4 4a16 16 0 0 1 16 16"></path>
                    <circle cx="5" cy="19" r="1"></circle>
                </svg>
                <span>RSS Feed</span>
            </a>
        </div>
      </div>

      <div class="footer-section">
          <h3>Stay Updated</h3>
          <p>Join our newsletter for monthly magic.</p>
          
          <form id="newsletter-form" class="subscribe-form" method="POST">
              <input type="email" id="email-input" name="fields[email]" placeholder="Your email address" required>
              
              <input type="hidden" name="ml-submit" value="1">
              <input type="hidden" name="anticsrf" value="true">

              <button type="submit" id="subscribe-btn">Subscribe</button>
          </form>

          <div id="newsletter-success" style="display:none; margin-top:10px; color: #dcd6e8; font-size: 0.9rem;">
              âœ¨ You're on the list! Check your inbox (Might be in your spam!).
          </div>
          
          <div id="newsletter-error" style="display:none; margin-top:10px; color: #ffadad; font-size: 0.9rem;">
              Oops! Something went wrong. Please try again.
          </div>
      </div>

    </div>

    <div class="footer-bottom">
      &copy; {{ site.time | date: "%Y" }} The Quiet Readers. Designed with &#9829;
    </div>
  </footer>

  <div id="back-to-top" onclick="scrollToTop()">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M18 15l-6-6-6 6"/>
    </svg>
  </div>

  <script>
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('results-container'),
      json: '{{ site.baseurl }}/search.json',
      searchResultTemplate: '<li><a href="{url}">{title}</a></li>',
      noResultsText: 'No results found',
      limit: 5,
      fuzzy: false
    })
  </script>
  <script src="{{ site.baseurl }}/assets/js/scripts.js"></script>
{% include cookie-consent.html %}
</body>
</html>

<!-- Newsletter script -->
 <script>
    const form = document.getElementById('newsletter-form');
    const emailInput = document.getElementById('email-input');
    const btn = document.getElementById('subscribe-btn');
    const successMsg = document.getElementById('newsletter-success');
    const errorMsg = document.getElementById('newsletter-error');

    // Your specific MailerLite URL
    const ML_URL = 'https://assets.mailerlite.com/jsonp/2050294/forms/177069136154723589/subscribe';

    form.addEventListener('submit', function(e) {
        e.preventDefault(); // Stop the ugly redirect
        
        // Disable button while loading
        btn.textContent = '...';
        btn.disabled = true;

        // Package the data
        const data = new FormData(form);
        
        // Send it to MailerLite
        fetch(ML_URL, {
            method: 'POST',
            body: data
        })
        .then(response => {
            // MailerLite's JSONP endpoint is tricky, it might return an "opaque" response
            // But if we get here without a network error, we assume it worked.
            form.style.display = 'none';
            successMsg.style.display = 'block';
        })
        .catch(error => {
            console.error('Error:', error);
            btn.textContent = 'Subscribe';
            btn.disabled = false;
            errorMsg.style.display = 'block';
        });
    });
</script>
